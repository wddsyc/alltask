<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet">
    <style>
        .wrap {
            position: relative;
            width: 320px;
            height: 180px;
            overflow: hidden;
            margin: 0 auto;
        }

        ul {
            margin: 0;
            padding: 0;
            list-style: none;
            display: flex;
            transform: translate(-320px);
            transition: .5s;
        }
        .pic {
            height: 180px;
            width: 320px;
        }
        .pic1 {
            background: skyblue;
        }

        .pic2 {
            background: sandybrown;
        }

        .pic3 {
            background: deeppink;
        }

        .pic4 {
            background: blueviolet;
        }
        .fa {
            cursor: pointer;
            position: absolute;
            font-size: 30px;
            color: whitesmoke;
        }

        .fa-arrow-left {
            top: 50%;
            transform: translate(50%, -50%);
        }

        .fa-arrow-right {
            top: 50%;
            right: 0;
            transform: translate(-50%, -50%)
        }
    </style>
    <title>图片轮播</title>
</head>

<body>
    <div class="wrap">
        <ul class="items">
            <li data-id="1">
                <div class="pic pic1"></div>
            </li>
            <li data-id="2">
                <div class="pic pic2"></div>
            </li>
            <li data-id="3">
                <div class="pic pic3"></div>
            </li>
            <li data-id="4">
                <div class="pic pic4"></div>
            </li>
        </ul>
        <i class="fa fa-arrow-left" aria-hidden="true"></i>
        <i class="fa fa-arrow-right" aria-hidden="true"></i>
    </div>
    <script>
        let $ul = document.querySelector(`.items`)
        let $lis = document.querySelectorAll(`.items>li`)
        let $left = document.querySelector(`.fa-arrow-left`)
        let $right = document.querySelector(`.fa-arrow-right`)

        let pageIndex = 1
        let isAnimate = false

        let lisCount = $lis.length
        console.log(lisCount)
        let imgWidth = $ul.firstElementChild.offsetWidth

        $ul.appendChild($ul.firstElementChild.cloneNode(true))
        $ul.prepend($ul.querySelector(`li:nth-child(${lisCount})`).cloneNode(true))

        $left.addEventListener(`click`,()=>{
            playPre()
        })
        $right.addEventListener(`click`,()=>{
            playNext()
        })
        function playNext() {
            pageIndex += 1
            console.log($ul.style.transform += `translateX(-${imgWidth}px)` )
            if(lisCount === pageIndex-1) {
                pageIndex = 1
                $ul.style.transform = `translateX(-${imgWidth}px)`
            }
        }
        function playPre() {
            pageIndex -= 1
            $ul.style.transform += `translateX(${imgWidth}px)`
            if(pageIndex < 1 ){
                pageIndex = lisCount
                $ul.style.transform = `translateX(${lisCount * imgWidth}px)`
            }
        }
    </script>
</body>

</html>